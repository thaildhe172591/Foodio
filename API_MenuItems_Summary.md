# API Endpoints - Qu·∫£n l√Ω M√≥n ƒÉn

## Base URL: `/api/admin/menu-items`

### üìã Danh s√°ch API Endpoints

| # | Method | Endpoint | C√¥ng d·ª•ng | Input | Output |
|---|--------|----------|-----------|-------|--------|
| 1 | GET | `/api/admin/menu-items` | L·∫•y danh s√°ch m√≥n ƒÉn v·ªõi t√¨m ki·∫øm v√† ph√¢n trang | `searchTerm`, `categoryId`, `isAvailable`, `minPrice`, `maxPrice`, `sortBy`, `sortOrder`, `page`, `pageSize` | `MenuItemSearchResultDto` |
| 2 | GET | `/api/admin/menu-items/{id}` | L·∫•y th√¥ng tin chi ti·∫øt m√≥n ƒÉn theo ID | `id` | `MenuItemv2Dto` |
| 3 | POST | `/api/admin/menu-items` | T·∫°o m√≥n ƒÉn m·ªõi | `CreateMenuItemDto` | `MenuItemv2Dto` |
| 4 | PUT | `/api/admin/menu-items/{id}` | C·∫≠p nh·∫≠t th√¥ng tin m√≥n ƒÉn | `id`, `UpdateMenuItemDto` | `204 No Content` |
| 5 | PATCH | `/api/admin/menu-items/{id}/availability-status` | C·∫≠p nh·∫≠t tr·∫°ng th√°i c√≤n m√≥n/h·∫øt m√≥n | `id`, `bool` | `{ message: string }` |
| 6 | PATCH | `/api/admin/menu-items/{id}/price` | C·∫≠p nh·∫≠t gi√° m√≥n ƒÉn | `id`, `decimal` | `{ message: string }` |
| 7 | PATCH | `/api/admin/menu-items/{id}/image` | C·∫≠p nh·∫≠t h√¨nh ·∫£nh m√≥n ƒÉn | `id`, `string` | `{ message: string }` |
| 8 | DELETE | `/api/admin/menu-items/{id}` | X√≥a m√≥n ƒÉn | `id` | `{ message: string }` |

---

## üìù DTOs

### CreateMenuItemDto
```json
{
  "name": "Ph·ªü b√≤",
  "description": "Ph·ªü b√≤ truy·ªÅn th·ªëng",
  "price": 75000,
  "imageUrl": "https://example.com/pho.jpg",
  "categoryId": "123e4567-e89b-12d3-a456-426614174000",
  "isAvailable": true
}
```

### UpdateMenuItemDto
```json
{
  "name": "Ph·ªü b√≤ ƒë·∫∑c bi·ªát",
  "description": "Ph·ªü b√≤ ƒë·∫∑c bi·ªát v·ªõi nhi·ªÅu th·ªãt",
  "price": 85000,
  "imageUrl": "https://example.com/pho-dac-biet.jpg",
  "categoryId": "123e4567-e89b-12d3-a456-426614174000",
  "isAvailable": true
}
```

### MenuItemv2Dto
```json
{
  "id": "123e4567-e89b-12d3-a456-426614174000",
  "name": "Ph·ªü b√≤",
  "description": "Ph·ªü b√≤ truy·ªÅn th·ªëng",
  "price": 75000,
  "imageUrl": "https://example.com/pho.jpg",
  "categoryId": "123e4567-e89b-12d3-a456-426614174000",
  "isAvailable": true
}
```

### MenuItemSearchDto
```json
{
  "searchTerm": "ph·ªü",
  "categoryId": "123e4567-e89b-12d3-a456-426614174000",
  "isAvailable": true,
  "minPrice": 50000,
  "maxPrice": 200000,
  "sortBy": "price",
  "sortOrder": "asc",
  "page": 1,
  "pageSize": 20
}
```

### MenuItemSearchResultDto
```json
{
  "items": [
    {
      "id": "123e4567-e89b-12d3-a456-426614174000",
      "name": "Ph·ªü b√≤",
      "description": "Ph·ªü b√≤ truy·ªÅn th·ªëng",
      "price": 75000,
      "imageUrl": "https://example.com/pho.jpg",
      "categoryId": "123e4567-e89b-12d3-a456-426614174000",
      "isAvailable": true
    }
  ],
  "totalCount": 50,
  "currentPage": 1,
  "pageSize": 20,
  "totalPages": 3,
  "hasNextPage": true,
  "hasPreviousPage": false,
  "searchCriteria": {
    "searchTerm": "ph·ªü",
    "categoryId": "123e4567-e89b-12d3-a456-426614174000",
    "isAvailable": true,
    "minPrice": 50000,
    "maxPrice": 200000,
    "sortBy": "price",
    "sortOrder": "asc",
    "page": 1,
    "pageSize": 20
  },
  "statistics": {
    "availableCount": 35,
    "unavailableCount": 15,
    "averagePrice": 125000,
    "minPrice": 50000,
    "maxPrice": 200000
  }
}
```

### SearchStatistics
```json
{
  "availableCount": 35,
  "unavailableCount": 15,
  "averagePrice": 125000,
  "minPrice": 50000,
  "maxPrice": 200000
}
```

## API Qu·∫£n l√Ω M√≥n ƒÉn (Menu Items Management)

### 1. L·∫•y danh s√°ch m√≥n ƒÉn (API t·ªïng h·ª£p)
- **Endpoint**: `GET /api/admin/menu-items`
- **C√¥ng d·ª•ng**: L·∫•y danh s√°ch m√≥n ƒÉn v·ªõi ƒë·∫ßy ƒë·ªß ch·ª©c nƒÉng t√¨m ki·∫øm, l·ªçc, s·∫Øp x·∫øp v√† ph√¢n trang
- **Input**: 
  - `searchTerm` (Optional): T·ª´ kh√≥a t√¨m ki·∫øm theo t√™n m√≥n ƒÉn
  - `categoryId` (Optional): ID danh m·ª•c ƒë·ªÉ l·ªçc
  - `isAvailable` (Optional): Tr·∫°ng th√°i c√≤n m√≥n/h·∫øt m√≥n (true: c√≤n m√≥n, false: h·∫øt m√≥n)
  - `minPrice` (Optional): Gi√° t·ªëi thi·ªÉu
  - `maxPrice` (Optional): Gi√° t·ªëi ƒëa
  - `sortBy` (Optional): S·∫Øp x·∫øp theo tr∆∞·ªùng (name, price, createdDate), m·∫∑c ƒë·ªãnh: "name"
  - `sortOrder` (Optional): Th·ª© t·ª± s·∫Øp x·∫øp (asc, desc), m·∫∑c ƒë·ªãnh: "asc"
  - `page` (Optional): S·ªë trang, m·∫∑c ƒë·ªãnh: 1
  - `pageSize` (Optional): S·ªë l∆∞·ª£ng m√≥n ƒÉn tr√™n trang (1-100), m·∫∑c ƒë·ªãnh: 20
- **Output**: `MenuItemSearchResultDto`

### 2. L·∫•y th√¥ng tin chi ti·∫øt m√≥n ƒÉn
- **Endpoint**: `GET /api/admin/menu-items/{id}`
- **C√¥ng d·ª•ng**: L·∫•y th√¥ng tin chi ti·∫øt c·ªßa m·ªôt m√≥n ƒÉn theo ID
- **Input**: 
  - `id` (Required): ID c·ªßa m√≥n ƒÉn (path parameter)
- **Output**: `MenuItemv2Dto`

### 3. T·∫°o m√≥n ƒÉn m·ªõi
- **Endpoint**: `POST /api/admin/menu-items`
- **C√¥ng d·ª•ng**: T·∫°o m√≥n ƒÉn m·ªõi trong menu
- **Input**: 
  - `CreateMenuItemDto` (Required): Body request
- **Output**: `MenuItemv2Dto` (201 Created)

### 4. C·∫≠p nh·∫≠t th√¥ng tin m√≥n ƒÉn
- **Endpoint**: `PUT /api/admin/menu-items/{id}`
- **C√¥ng d·ª•ng**: C·∫≠p nh·∫≠t th√¥ng tin c·ªßa m√≥n ƒÉn
- **Input**: 
  - `id` (Required): ID c·ªßa m√≥n ƒÉn (path parameter)
  - `UpdateMenuItemDto` (Required): Body request
- **Output**: `204 No Content`

### 5. C·∫≠p nh·∫≠t tr·∫°ng th√°i c√≤n m√≥n/h·∫øt m√≥n
- **Endpoint**: `PATCH /api/admin/menu-items/{id}/availability-status`
- **C√¥ng d·ª•ng**: C·∫≠p nh·∫≠t tr·∫°ng th√°i c√≤n m√≥n ho·∫∑c h·∫øt m√≥n
- **Input**: 
  - `id` (Required): ID c·ªßa m√≥n ƒÉn (path parameter)
  - `bool` (Required): true (c√≤n m√≥n) ho·∫∑c false (h·∫øt m√≥n) (body)
- **Output**: `{ message: string }`

### 6. C·∫≠p nh·∫≠t gi√° m√≥n ƒÉn
- **Endpoint**: `PATCH /api/admin/menu-items/{id}/price`
- **C√¥ng d·ª•ng**: C·∫≠p nh·∫≠t gi√° c·ªßa m√≥n ƒÉn
- **Input**: 
  - `id` (Required): ID c·ªßa m√≥n ƒÉn (path parameter)
  - `decimal` (Required): Gi√° m·ªõi (body)
- **Output**: `{ message: string }`

### 7. C·∫≠p nh·∫≠t h√¨nh ·∫£nh m√≥n ƒÉn
- **Endpoint**: `PATCH /api/admin/menu-items/{id}/image`
- **C√¥ng d·ª•ng**: C·∫≠p nh·∫≠t URL h√¨nh ·∫£nh c·ªßa m√≥n ƒÉn
- **Input**: 
  - `id` (Required): ID c·ªßa m√≥n ƒÉn (path parameter)
  - `string` (Required): URL h√¨nh ·∫£nh m·ªõi (body)
- **Output**: `{ message: string }`

### 8. X√≥a m√≥n ƒÉn
- **Endpoint**: `DELETE /api/admin/menu-items/{id}`
- **C√¥ng d·ª•ng**: X√≥a m√≥n ƒÉn kh·ªèi menu (ch·ªâ khi kh√¥ng c√≥ trong ƒë∆°n h√†ng)
- **Input**: 
  - `id` (Required): ID c·ªßa m√≥n ƒÉn c·∫ßn x√≥a (path parameter)
- **Output**: `{ message: string }`

## Business Rules

### Validation Rules
1. **T√™n m√≥n ƒÉn**: 
   - Kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ tr·ªëng
   - Kh√¥ng ƒë∆∞·ª£c tr√πng l·∫∑p (kh√¥ng ph√¢n bi·ªát hoa th∆∞·ªùng)

2. **Gi√° m√≥n ƒÉn**: 
   - Kh√¥ng ƒë∆∞·ª£c √¢m
   - Kho·∫£ng gi√°: gi√° t·ªëi thi·ªÉu kh√¥ng ƒë∆∞·ª£c l·ªõn h∆°n gi√° t·ªëi ƒëa

3. **Danh m·ª•c**: 
   - Ph·∫£i t·ªìn t·∫°i trong database

4. **X√≥a m√≥n ƒÉn**: 
   - Kh√¥ng th·ªÉ x√≥a m√≥n ƒÉn ƒë√£ c√≥ trong ƒë∆°n h√†ng

5. **Ph√¢n trang**: 
   - S·ªë trang ph·∫£i l·ªõn h∆°n 0
   - Page size ph·∫£i t·ª´ 1-100

### Error Handling
- **400 Bad Request**: Validation errors
- **404 Not Found**: M√≥n ƒÉn kh√¥ng t·ªìn t·∫°i
- **500 Internal Server Error**: L·ªói h·ªá th·ªëng

## V√≠ d·ª• s·ª≠ d·ª•ng

### 1. L·∫•y t·∫•t c·∫£ m√≥n ƒÉn
```http
GET /api/admin/menu-items
```

### 2. L·ªçc theo tr·∫°ng th√°i c√≤n m√≥n
```http
GET /api/admin/menu-items?isAvailable=true
```

### 3. L·ªçc theo danh m·ª•c
```http
GET /api/admin/menu-items?categoryId=123e4567-e89b-12d3-a456-426614174000
```

### 4. T√¨m ki·∫øm theo t√™n
```http
GET /api/admin/menu-items?searchTerm=ph·ªü
```

### 5. L·ªçc theo kho·∫£ng gi√°
```http
GET /api/admin/menu-items?minPrice=50000&maxPrice=200000
```

### 6. S·∫Øp x·∫øp theo gi√° tƒÉng d·∫ßn
```http
GET /api/admin/menu-items?sortBy=price&sortOrder=asc
```

### 7. Ph√¢n trang
```http
GET /api/admin/menu-items?page=2&pageSize=10
```

### 8. K·∫øt h·ª£p nhi·ªÅu ƒëi·ªÅu ki·ªán
```http
GET /api/admin/menu-items?searchTerm=ph·ªü&categoryId=123&isAvailable=true&minPrice=50000&maxPrice=200000&sortBy=price&sortOrder=asc&page=1&pageSize=20
```

### 9. T·∫°o m√≥n ƒÉn m·ªõi
```http
POST /api/admin/menu-items
Content-Type: application/json

{
  "name": "Ph·ªü b√≤",
  "description": "Ph·ªü b√≤ truy·ªÅn th·ªëng",
  "price": 75000,
  "imageUrl": "https://example.com/pho.jpg",
  "categoryId": "123e4567-e89b-12d3-a456-426614174000",
  "isAvailable": true
}
```

### 10. C·∫≠p nh·∫≠t m√≥n ƒÉn
```http
PUT /api/admin/menu-items/123e4567-e89b-12d3-a456-426614174000
Content-Type: application/json

{
  "name": "Ph·ªü b√≤ ƒë·∫∑c bi·ªát",
  "description": "Ph·ªü b√≤ ƒë·∫∑c bi·ªát v·ªõi nhi·ªÅu th·ªãt",
  "price": 85000,
  "imageUrl": "https://example.com/pho-dac-biet.jpg",
  "categoryId": "123e4567-e89b-12d3-a456-426614174000",
  "isAvailable": true
}
```

### 11. C·∫≠p nh·∫≠t tr·∫°ng th√°i c√≤n m√≥n
```http
PATCH /api/admin/menu-items/123e4567-e89b-12d3-a456-426614174000/availability-status
Content-Type: application/json

true
```

### 12. C·∫≠p nh·∫≠t gi√° m√≥n ƒÉn
```http
PATCH /api/admin/menu-items/123e4567-e89b-12d3-a456-426614174000/price
Content-Type: application/json

85000
```

### 13. C·∫≠p nh·∫≠t h√¨nh ·∫£nh m√≥n ƒÉn
```http
PATCH /api/admin/menu-items/123e4567-e89b-12d3-a456-426614174000/image
Content-Type: application/json

"https://example.com/pho-new.jpg"
```

### 14. X√≥a m√≥n ƒÉn
```http
DELETE /api/admin/menu-items/123e4567-e89b-12d3-a456-426614174000
```

## T√≠nh nƒÉng

### 1. CRUD Operations
- ‚úÖ **Create**: T·∫°o m√≥n ƒÉn m·ªõi
- ‚úÖ **Read**: L·∫•y danh s√°ch v√† chi ti·∫øt m√≥n ƒÉn
- ‚úÖ **Update**: C·∫≠p nh·∫≠t th√¥ng tin m√≥n ƒÉn
- ‚úÖ **Delete**: X√≥a m√≥n ƒÉn (v·ªõi validation)

### 2. Partial Update Operations
- ‚úÖ **C·∫≠p nh·∫≠t tr·∫°ng th√°i**: C√≤n m√≥n/h·∫øt m√≥n
- ‚úÖ **C·∫≠p nh·∫≠t gi√°**: Thay ƒë·ªïi gi√° m√≥n ƒÉn
- ‚úÖ **C·∫≠p nh·∫≠t h√¨nh ·∫£nh**: Thay ƒë·ªïi URL h√¨nh ·∫£nh

### 3. T√¨m ki·∫øm v√† L·ªçc
- ‚úÖ **T√¨m ki·∫øm theo t√™n**: Kh√¥ng ph√¢n bi·ªát hoa th∆∞·ªùng
- ‚úÖ **L·ªçc theo danh m·ª•c**: Theo ID danh m·ª•c
- ‚úÖ **L·ªçc theo tr·∫°ng th√°i**: C√≤n m√≥n/h·∫øt m√≥n
- ‚úÖ **L·ªçc theo gi√°**: Kho·∫£ng gi√° t·ªëi thi·ªÉu/t·ªëi ƒëa
- ‚úÖ **S·∫Øp x·∫øp**: Theo t√™n, gi√°, ng√†y t·∫°o
- ‚úÖ **Ph√¢n trang**: H·ªó tr·ª£ ph√¢n trang v·ªõi th√¥ng tin ƒë·∫ßy ƒë·ªß

### 4. Th·ªëng k√™
- ‚úÖ **S·ªë m√≥n ƒÉn c√≤n m√≥n**
- ‚úÖ **S·ªë m√≥n ƒÉn h·∫øt m√≥n**
- ‚úÖ **Gi√° trung b√¨nh**
- ‚úÖ **Gi√° th·∫•p nh·∫•t/cao nh·∫•t**

### 5. Validation
- ‚úÖ **D·ªØ li·ªáu ƒë·∫ßu v√†o**: Ki·ªÉm tra t√™n, gi√° kh√¥ng r·ªóng/√¢m
- ‚úÖ **Tr√πng l·∫∑p**: Ki·ªÉm tra t√™n kh√¥ng tr√πng
- ‚úÖ **R√†ng bu·ªôc**: Kh√¥ng x√≥a m√≥n ƒÉn c√≥ trong ƒë∆°n h√†ng
- ‚úÖ **Danh m·ª•c**: Ki·ªÉm tra danh m·ª•c t·ªìn t·∫°i
- ‚úÖ **Ph√¢n trang**: Validation tham s·ªë ph√¢n trang 